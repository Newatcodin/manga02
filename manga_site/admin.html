<!DOCTYPE html>
<html>
<head><title>Admin</title></head>
<body>
<script>
const PASSWORD="2008";
if(prompt("Password")!==PASSWORD){
 document.body.innerHTML="";
 throw new Error("Denied");
}
</script>
<h2>Admin Upload</h2>
<input id="chapter" placeholder="Chapter">
<input type="file" id="images" multiple>
<button onclick="upload()">Upload</button>
<script>
const CLOUD_NAME="db5rbto6c";
const UPLOAD_PRESET="manga_upload";
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbz4hI8LoA-QCzF7JaHeRnmBTB9MuhTEFGSA1t3x9tHWYbT5_zGDYYiofQc3fRo9QmSQhw/exec";

async function upload(){
 let urls=[];
 for(let f of images.files){
  let fd=new FormData();
  fd.append("file",f);
  fd.append("upload_preset",UPLOAD_PRESET);
  let r=await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,{method:"POST",body:fd});
  let d=await r.json();
  urls.push(d.secure_url);
 }
 await fetch(SCRIPT_URL,{method:"POST",body:JSON.stringify({manga_id:1,chapter:chapter.value,image_urls:urls})});
 alert("Uploaded");
}
</script>
</body>
</html>